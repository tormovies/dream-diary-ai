/* Стили для статей и инструкций */

/* ============================================
   БАЗОВЫЕ СТИЛИ ДЛЯ СТАТЕЙ
   ============================================ */

/* Улучшенные стили для светлой темы - темные цвета для читабельности */
.prose {
    color: #1f2937 !important;
}

.prose ul,
.prose ol {
    color: #1f2937 !important;
}

.prose li {
    color: #1f2937 !important;
}

.prose p {
    color: #1f2937 !important;
}

.prose strong {
    color: #111827 !important;
}

.prose a {
    color: #7c3aed !important;
}

.prose a:hover {
    color: #6d28d9 !important;
}

/* Списки в светлой теме - темные цвета */
.prose ul li,
.prose ol li {
    color: #1f2937 !important;
}

.prose ul li::marker,
.prose ol li::marker {
    color: #4b5563 !important;
}

/* Все текстовые элементы в светлой теме - темные */
.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
    color: #111827 !important;
}

/* Ровные отступы для заголовков h2 */
.prose h2 {
    margin-top: 2.5rem !important;
    margin-bottom: 1rem !important;
}

.prose h2:first-child {
    margin-top: 0 !important;
}

/* Ровные отступы для заголовков вопросов (div с классом question-header) */
.prose .question-header {
    margin-top: 1.5rem !important;
    margin-bottom: 1.5rem !important;
}

.prose .question-header:first-child {
    margin-top: 0 !important;
}

/* Переопределяем mt-10, если он остался в старых записях */
.prose div.mt-10 {
    margin-top: 1.5rem !important;
    margin-bottom: 1.5rem !important;
}

.prose div.mt-10:first-child {
    margin-top: 0 !important;
}

.prose blockquote {
    color: #374151 !important;
}

.prose code {
    color: #1f2937 !important;
    background-color: #f3f4f6 !important;
}

/* Убираем светлые серые цвета в светлой теме */
.prose .text-gray-300,
.prose .text-gray-400,
.prose .text-gray-500 {
    color: #1f2937 !important;
}

/* Специально для элементов с классами Tailwind в контенте */
.prose [class*="text-gray-300"],
.prose [class*="text-gray-400"],
.prose [class*="text-gray-500"] {
    color: #1f2937 !important;
}

/* Улучшенные стили для темной темы в статьях */
.prose.dark\:prose-invert {
    color: #e5e7eb;
}

.prose.dark\:prose-invert ul,
.prose.dark\:prose-invert ol {
    color: #d1d5db;
}

.prose.dark\:prose-invert li {
    color: #d1d5db;
}

.prose.dark\:prose-invert a {
    color: #a78bfa;
}

.prose.dark\:prose-invert a:hover {
    color: #c4b5fd;
}

.prose.dark\:prose-invert strong {
    color: #e5e7eb;
}

.prose.dark\:prose-invert code {
    background-color: #374151;
    color: #f3f4f6;
}

/* Улучшение цветов для списков в темной теме - более мягкие */
.dark .prose ul li,
.dark .prose ol li {
    color: #d1d5db !important;
}

.dark .prose ul li::marker,
.dark .prose ol li::marker {
    color: #9ca3af;
}

/* Улучшение цветов для карточек в темной теме */
.dark .bg-white {
    background-color: #1f2937 !important;
}

.dark .text-gray-700 {
    color: #d1d5db !important;
}

.dark .text-gray-300 {
    color: #d1d5db !important;
}

/* Улучшение цветов для градиентов в темной теме - более темные и мягкие */
.dark .from-purple-50,
.dark .to-blue-50,
.dark .from-purple-900\/30,
.dark .to-blue-900\/30,
.dark .from-gray-700\/50,
.dark .to-gray-700\/50 {
    background-color: #374151 !important;
}

.dark .from-purple-100,
.dark .to-blue-100,
.dark .from-purple-800\/40,
.dark .to-blue-800\/40,
.dark .from-gray-600\/60,
.dark .to-gray-600\/60 {
    background-color: #4b5563 !important;
}

.dark .from-gray-800,
.dark .via-gray-800,
.dark .to-gray-800,
.dark .from-gray-800\/80,
.dark .via-gray-800\/80,
.dark .to-gray-800\/80 {
    background-color: #374151 !important;
}

/* Специально для списка вопросов - очень темный фон, убираем ядерные цвета */
.dark .bg-gradient-to-r.from-purple-50,
.dark .bg-gradient-to-r.to-blue-50,
.dark .bg-gradient-to-r.from-gray-700\/50,
.dark .bg-gradient-to-r.to-gray-700\/50,
.dark .bg-gradient-to-r.from-gray-700,
.dark .bg-gradient-to-r.to-gray-700 {
    background: #374151 !important;
    background-image: none !important;
}

.dark .bg-gradient-to-br.from-purple-50,
.dark .bg-gradient-to-br.from-blue-50,
.dark .bg-gradient-to-br.via-blue-50,
.dark .dark .bg-gradient-to-br.to-indigo-50,
.dark .bg-gradient-to-br.from-gray-800\/80,
.dark .bg-gradient-to-br.via-gray-800\/80,
.dark .bg-gradient-to-br.to-gray-800\/80,
.dark .bg-gradient-to-br.from-gray-800,
.dark .bg-gradient-to-br.via-gray-800,
.dark .bg-gradient-to-br.to-gray-800 {
    background: #374151 !important;
    background-image: none !important;
}

/* Переопределяем все градиенты в темной теме на темно-серый - агрессивно */
.dark [class*="bg-gradient"] {
    background-image: none !important;
}

/* Убираем все градиенты и заменяем на темный фон */
.dark .bg-gradient-to-r,
.dark .bg-gradient-to-br {
    background: #374151 !important;
    background-image: none !important;
}

.dark [class*="from-purple-50"],
.dark [class*="to-blue-50"],
.dark [class*="via-blue-50"],
.dark [class*="to-indigo-50"],
.dark [class*="from-gray-700"],
.dark [class*="to-gray-700"],
.dark [class*="from-gray-800"],
.dark [class*="to-gray-800"] {
    background-color: #374151 !important;
    background-image: none !important;
}

.dark [class*="from-purple-100"],
.dark [class*="to-blue-100"],
.dark [class*="from-gray-600"],
.dark [class*="to-gray-600"] {
    background-color: #4b5563 !important;
    background-image: none !important;
}

/* Специально для ссылок в списке вопросов */
.dark a[class*="bg-gradient"] {
    background: #374151 !important;
    background-image: none !important;
}

.dark a[class*="bg-gradient"]:hover {
    background: #4b5563 !important;
    background-image: none !important;
}

/* Мягкие цвета для текста в списке вопросов */
.dark a[href^="#question-"] {
    color: #d1d5db !important;
}

.dark a[href^="#question-"]:hover {
    color: #f3f4f6 !important;
}

/* Мягкие цвета для иконок в списке вопросов */
.dark a[href^="#question-"] .fa-arrow-right {
    color: #9ca3af !important;
}

/* Мягкие цвета для заголовка "Содержание" */
.dark h2.text-purple-700 {
    color: #d1d5db !important;
}

.dark h2 .fa-list-ul {
    color: #9ca3af !important;
}

/* Улучшение цветов для списков вопросов в темной теме */
.dark .list-disc li,
.dark .list-decimal li {
    color: #d1d5db !important;
}

/* Улучшение цветов для выделенных элементов в темной теме - более мягкие */
.dark .text-purple-600 {
    color: #a78bfa !important;
}

.dark .text-purple-400 {
    color: #c4b5fd !important;
}

.dark .text-purple-700 {
    color: #c4b5fd !important;
}

.dark .text-purple-300 {
    color: #c4b5fd !important;
}

.dark .text-purple-900 {
    color: #e9d5ff !important;
}

.dark .text-purple-100 {
    color: #e9d5ff !important;
}

/* Улучшение цветов для границ в темной теме - более мягкие */
.dark .border-purple-500 {
    border-color: #6d28d9 !important;
}

.dark .border-purple-400 {
    border-color: #8b5cf6 !important;
}

.dark .border-purple-800 {
    border-color: #5b21b6 !important;
}

.dark .border-purple-700 {
    border-color: #6d28d9 !important;
}

/* Улучшение цветов для информационных блоков в темной теме - более мягкие */
.dark .bg-yellow-50,
.dark .bg-yellow-900\/20 {
    background-color: #78350f !important;
}

.dark .bg-blue-50,
.dark .bg-blue-900\/20 {
    background-color: #1e3a8a !important;
}

.dark .bg-green-50,
.dark .bg-green-900\/20 {
    background-color: #14532d !important;
}

.dark .bg-red-50,
.dark .bg-red-900\/20 {
    background-color: #7f1d1d !important;
}

.dark .text-yellow-800,
.dark .text-yellow-300 {
    color: #fbbf24 !important;
}

.dark .text-blue-800,
.dark .text-blue-300 {
    color: #93c5fd !important;
}

.dark .text-green-800,
.dark .text-green-300 {
    color: #86efac !important;
}

.dark .text-red-800,
.dark .text-red-300 {
    color: #fca5a5 !important;
}

/* Улучшение цветов для иконок в темной теме */
.dark .text-purple-500 {
    color: #a78bfa !important;
}

/* Ровные отступы для заголовков h2 в темной теме */
.dark .prose h2 {
    margin-top: 2.5rem !important;
    margin-bottom: 1rem !important;
}

.dark .prose h2:first-child {
    margin-top: 0 !important;
}

/* Для h2 внутри div - не добавляем дополнительный отступ сверху */
.dark .prose > div > h2 {
    margin-top: 0 !important;
}

/* Но для обычных h2 (не в div) сохраняем отступы */
.dark .prose > h2 {
    margin-top: 2.5rem !important;
}

.dark .prose > h2:first-child {
    margin-top: 0 !important;
}

/* Ровные отступы для заголовков вопросов в темной теме */
.dark .prose .question-header {
    margin-top: 1.5rem !important;
    margin-bottom: 1.5rem !important;
}

.dark .prose .question-header:first-child {
    margin-top: 0 !important;
}

/* Переопределяем mt-10 в темной теме, если он остался в старых записях */
.dark .prose div.mt-10 {
    margin-top: 1.5rem !important;
    margin-bottom: 1.5rem !important;
}

.dark .prose div.mt-10:first-child {
    margin-top: 0 !important;
}

/* Плавная прокрутка для всех якорей */
html {
    scroll-behavior: smooth;
}

/* Правильное позиционирование заголовков вопросов при переходе по якорям */
/* Учитываем высоту фиксированного хедера (примерно 80-100px) */
h2[id^="question-"] {
    scroll-margin-top: 120px;
    position: relative;
    transition: all 0.3s ease;
}

/* Визуальное выделение заголовка при переходе по якорю */
h2[id^="question-"]:target {
    animation: highlightQuestion 2s ease-in-out;
}

@keyframes highlightQuestion {
    0% {
        background-color: rgba(139, 92, 246, 0.2);
        padding-left: 1rem;
        padding-right: 1rem;
        margin-left: -1rem;
        margin-right: -1rem;
        border-radius: 0.5rem;
    }
    50% {
        background-color: rgba(139, 92, 246, 0.3);
    }
    100% {
        background-color: transparent;
        padding-left: 0;
        padding-right: 0;
        margin-left: 0;
        margin-right: 0;
    }
}

/* Для темной темы - более мягкое выделение */
.dark h2[id^="question-"]:target {
    animation: highlightQuestionDark 2s ease-in-out;
}

@keyframes highlightQuestionDark {
    0% {
        background-color: rgba(139, 92, 246, 0.15);
        padding-left: 1rem;
        padding-right: 1rem;
        margin-left: -1rem;
        margin-right: -1rem;
        border-radius: 0.5rem;
    }
    50% {
        background-color: rgba(139, 92, 246, 0.25);
    }
    100% {
        background-color: transparent;
        padding-left: 0;
        padding-right: 0;
        margin-left: 0;
        margin-right: 0;
    }
}

/* Стили для ссылок на инструкции на странице /guide */
.guide-item-link {
    background: linear-gradient(to right, #faf5ff, #eff6ff) !important;
}

.guide-item-link:hover {
    background: linear-gradient(to right, #f3e8ff, #dbeafe) !important;
}

/* Для темной темы */
.dark .guide-item-link {
    background: #374151 !important;
}

.dark .guide-item-link:hover {
    background: #4b5563 !important;
}

/* Переопределяем Tailwind классы для гарантии работы на продакшене */
.guide-item-link.bg-gradient-to-r.from-purple-50.to-blue-50:hover {
    background: linear-gradient(to right, #f3e8ff, #dbeafe) !important;
}

/* ============================================
   СТИЛИ ДЛЯ ОЧИЩЕННОГО КОНТЕНТА СТАТЕЙ
   (без классов, только семантический HTML)
   ============================================ */

/* Блок с содержанием - первый div в статье */
.prose > div:first-child {
    margin-bottom: 2rem;
    padding: 1.5rem;
    background: linear-gradient(to bottom right, #faf5ff, #eff6ff, #eef2ff);
    border-radius: 1rem;
    border: 2px solid #e9d5ff;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

.dark .prose > div:first-child {
    background: #374151;
    border-color: #4b5563;
}

/* Заголовок "Содержание" в первом div */
.prose > div:first-child > h2 {
    font-size: 1.5rem;
    font-weight: bold;
    color: #9333ea;
    margin-top: 0;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
}

.dark .prose > div:first-child > h2 {
    color: #d1d5db;
}

/* Иконка в заголовке "Содержание" */
.prose > div:first-child > h2 > i {
    margin-right: 0.75rem;
    color: #a855f7;
}

.dark .prose > div:first-child > h2 > i {
    color: #9ca3af;
}

/* Список вопросов в первом div */
.prose > div:first-child > ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

/* Элементы списка вопросов */
.prose > div:first-child > ul > li {
    margin-bottom: 0.5rem;
}

/* Ссылки в списке вопросов */
.prose > div:first-child > ul > li > a {
    display: block;
    background: linear-gradient(to right, #faf5ff, #eff6ff);
    border-left: 4px solid #a855f7;
    padding: 0.75rem 1rem;
    border-radius: 0 0.5rem 0.5rem 0;
    color: #9333ea;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.2s;
}

.prose > div:first-child > ul > li > a:hover {
    background: linear-gradient(to right, #f3e8ff, #dbeafe);
    color: #7e22ce;
}

.dark .prose > div:first-child > ul > li > a {
    background: #374151;
    border-color: #4b5563;
    color: #d1d5db;
}

.dark .prose > div:first-child > ul > li > a:hover {
    background: #4b5563;
    color: #f3f4f6;
}

/* Иконка в ссылках списка вопросов */
.prose > div:first-child > ul > li > a > i {
    margin-right: 0.5rem;
    color: #a855f7;
}

.dark .prose > div:first-child > ul > li > a > i {
    color: #9ca3af;
}

/* Блоки вопросов - каждый div:not(:first-child) */
.prose > div:not(:first-child) {
    margin-bottom: 2rem;
}

/* Div с заголовком вопроса (первый вложенный div) */
.prose > div:not(:first-child) > div:first-child {
    padding-bottom: 1rem;
    border-bottom: 2px solid #e9d5ff;
    margin-bottom: 1rem;
}

.dark .prose > div:not(:first-child) > div:first-child {
    border-color: #4b5563;
}

/* Заголовки вопросов (h2 с id="question-X") */
.prose > div > div > h2[id^="question-"],
.prose h2[id^="question-"] {
    font-size: 1.5rem;
    font-weight: bold;
    color: #9333ea;
    margin: 0;
    padding: 0;
    display: flex;
    align-items: center;
}

.dark .prose > div > div > h2[id^="question-"],
.dark .prose h2[id^="question-"] {
    color: #c4b5fd;
}

/* Иконка в заголовках вопросов */
.prose h2[id^="question-"] > i {
    margin-right: 0.75rem;
    color: #a855f7;
}

.dark .prose h2[id^="question-"] > i {
    color: #a78bfa;
}

/* Div с контентом вопроса (второй вложенный div) */
.prose > div:not(:first-child) > div:last-child {
    padding: 1.5rem;
    background: white;
    border-radius: 0.75rem;
    border: 1px solid #e5e7eb;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
}

.dark .prose > div:not(:first-child) > div:last-child {
    background: #1f2937;
    border-color: #374151;
}

/* Параграфы в блоках вопросов */
.prose > div > div > p {
    color: #374151;
    line-height: 1.75;
    margin-bottom: 1rem;
}

.prose > div > div > p:last-child {
    margin-bottom: 0;
}

.dark .prose > div > div > p {
    color: #d1d5db;
}

/* Списки в блоках вопросов */
.prose > div > div > ul,
.prose > div > div > ol {
    color: #374151;
    margin-bottom: 1rem;
    padding-left: 2rem;
}

.prose > div > div > ul:last-child,
.prose > div > div > ol:last-child {
    margin-bottom: 0;
}

.dark .prose > div > div > ul,
.dark .prose > div > div > ol {
    color: #d1d5db;
}

.prose > div > div > ul > li,
.prose > div > div > ol > li {
    margin-bottom: 0.5rem;
    line-height: 1.75;
}

/* Вложенные div (информационные блоки - "Важно", "Совет" и т.д.) */
.prose > div > div > div {
    margin-top: 1rem;
    margin-bottom: 1rem;
    padding: 1rem;
    border-left: 4px solid #fbbf24;
    border-radius: 0 0.5rem 0.5rem 0;
    background-color: #fef3c7;
}

.dark .prose > div > div > div {
    background-color: #78350f;
    border-color: #fbbf24;
}

.prose > div > div > div > p {
    margin: 0;
    color: #374151;
}

.dark .prose > div > div > div > p {
    color: #d1d5db;
}

.prose > div > div > div > p > strong {
    color: #92400e;
    font-weight: 600;
}

.dark .prose > div > div > div > p > strong {
    color: #fbbf24;
}

/* Ссылки в тексте */
.prose a {
    color: #7c3aed;
    text-decoration: underline;
    font-weight: 500;
}

.prose a:hover {
    color: #6d28d9;
}

.dark .prose a {
    color: #a78bfa;
}

.dark .prose a:hover {
    color: #c4b5fd;
}

/* Strong в обычном тексте */
.prose strong {
    color: #111827;
    font-weight: 600;
}

.dark .prose strong {
    color: #e5e7eb;
}

/* Списки с отступами */
.prose ul,
.prose ol {
    margin-left: 1rem;
    margin-bottom: 1rem;
    padding-left: 1.5rem;
}

.prose ul {
    list-style-type: disc;
}

.prose ol {
    list-style-type: decimal;
}

.prose li {
    margin-bottom: 0.5rem;
    line-height: 1.75;
}

/* Вложенные списки */
.prose ul ul,
.prose ol ol,
.prose ul ol,
.prose ol ul {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
}

/* Блоки кода */
.prose code {
    background-color: #f3f4f6;
    padding: 0.125rem 0.375rem;
    border-radius: 0.25rem;
    font-size: 0.875em;
    color: #1f2937;
}

.dark .prose code {
    background-color: #374151;
    color: #f3f4f6;
}

.prose pre {
    background-color: #1f2937;
    color: #f3f4f6;
    padding: 1rem;
    border-radius: 0.5rem;
    overflow-x: auto;
    margin-bottom: 1rem;
}

.dark .prose pre {
    background-color: #111827;
}

.prose pre code {
    background-color: transparent;
    padding: 0;
    color: inherit;
}

/* Изображения */
.prose img {
    max-width: 100%;
    height: auto;
    border-radius: 0.5rem;
    margin: 1rem 0;
}

/* Видео */
.prose video {
    max-width: 100%;
    border-radius: 0.5rem;
    margin: 1rem 0;
}

/* Blockquote */
.prose blockquote {
    border-left: 4px solid #e5e7eb;
    padding-left: 1rem;
    margin: 1rem 0;
    color: #6b7280;
    font-style: italic;
}

.dark .prose blockquote {
    border-color: #4b5563;
    color: #9ca3af;
}

/* ============================================
   СТИЛИ ДЛЯ СПОЙЛЕРОВ (FAQ ФОРМАТ) - HTML5 details/summary
   ============================================ */

/* HTML5 details/summary спойлеры - только для статей типа guide */
.prose details.faq-spoiler {
    margin-bottom: 1.5rem;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    background: white;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
    overflow: hidden;
    transition: all 0.3s ease;
}

.dark .prose details.faq-spoiler {
    background: #1f2937;
    border-color: #374151;
}

/* Заголовок спойлера (summary) */
.prose details.faq-spoiler summary.faq-spoiler-header {
    padding: 1.25rem 1.5rem;
    cursor: pointer;
    font-weight: 600;
    font-size: 1.125rem;
    color: #9333ea;
    background: linear-gradient(to right, #faf5ff, #eff6ff);
    border-bottom: 1px solid #e5e7eb;
    user-select: none;
    position: relative;
    transition: all 0.2s;
    list-style: none; /* Убираем стандартный маркер */
}

.prose details.faq-spoiler summary.faq-spoiler-header::-webkit-details-marker {
    display: none; /* Убираем стандартный маркер в WebKit */
}

.prose details.faq-spoiler summary.faq-spoiler-header::before {
    content: '▶';
    display: inline-block;
    margin-right: 0.75rem;
    transition: transform 0.2s;
    color: #a855f7;
    font-size: 0.875rem;
}

.prose details.faq-spoiler[open] summary.faq-spoiler-header::before {
    transform: rotate(90deg);
}

.prose details.faq-spoiler summary.faq-spoiler-header:hover {
    background: linear-gradient(to right, #f3e8ff, #dbeafe);
    color: #7e22ce;
}

.dark .prose details.faq-spoiler summary.faq-spoiler-header {
    background: #374151;
    border-color: #4b5563;
    color: #c4b5fd;
}

.dark .prose details.faq-spoiler summary.faq-spoiler-header:hover {
    background: #4b5563;
    color: #a78bfa;
}

/* Контент спойлера - общий padding для всех элементов кроме summary */
.prose details.faq-spoiler {
    padding: 0;
}

/* Все элементы контента кроме summary получают боковые отступы */
.prose details.faq-spoiler > *:not(summary) {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
    color: #374151;
    line-height: 1.75;
}

.dark .prose details.faq-spoiler > *:not(summary) {
    color: #d1d5db;
}

/* Первый элемент - padding сверху */
.prose details.faq-spoiler > *:not(summary):first-child {
    padding-top: 1.5rem;
}

/* Последний элемент - padding снизу */
.prose details.faq-spoiler > *:not(summary):last-child {
    padding-bottom: 1.5rem;
}

/* Параграфы внутри спойлера - уменьшенные отступы */
.prose details.faq-spoiler > p {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
}

.prose details.faq-spoiler > p:first-child {
    margin-top: 0;
}

.prose details.faq-spoiler > p:last-child {
    margin-bottom: 0;
}

/* Списки внутри спойлера - уменьшенные отступы */
.prose details.faq-spoiler > ul,
.prose details.faq-spoiler > ol {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
    padding-left: 2rem;
}

.prose details.faq-spoiler > ul:first-child,
.prose details.faq-spoiler > ol:first-child {
    margin-top: 0;
}

.prose details.faq-spoiler > ul:last-child,
.prose details.faq-spoiler > ol:last-child {
    margin-bottom: 0;
}

/* Элементы списков внутри спойлера */
.prose details.faq-spoiler > ul > li,
.prose details.faq-spoiler > ol > li {
    margin-bottom: 0.4rem;
    line-height: 1.6;
}

.prose details.faq-spoiler > ul > li:last-child,
.prose details.faq-spoiler > ol > li:last-child {
    margin-bottom: 0;
}

/* Ссылки внутри спойлера */
.prose details.faq-spoiler a {
    color: #7c3aed;
    text-decoration: underline;
    font-weight: 500;
}

.prose details.faq-spoiler a:hover {
    color: #6d28d9;
}

.dark .prose details.faq-spoiler a {
    color: #a78bfa;
}

.dark .prose details.faq-spoiler a:hover {
    color: #c4b5fd;
}

/* ============================================
   СТИЛИ ДЛЯ СПОЙЛЕРОВ (FAQ ФОРМАТ) - DIV версия (старая, для совместимости)
   ============================================ */

/* Блок "Содержание" */
.prose > h2:first-child {
    font-size: 1.5rem;
    font-weight: bold;
    color: #9333ea;
    margin-top: 0;
    margin-bottom: 1rem;
    padding: 1.5rem;
    background: linear-gradient(to bottom right, #faf5ff, #eff6ff, #eef2ff);
    border-radius: 1rem;
    border: 2px solid #e9d5ff;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

.dark .prose > h2:first-child {
    background: #374151;
    border-color: #4b5563;
    color: #d1d5db;
}

/* Список содержания */
.prose > h2:first-child + ul {
    list-style: none;
    padding: 0 1.5rem 1.5rem 1.5rem;
    margin: 0 0 2rem 0;
    background: linear-gradient(to bottom right, #faf5ff, #eff6ff, #eef2ff);
    border-radius: 0 0 1rem 1rem;
    border: 2px solid #e9d5ff;
    border-top: none;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

.dark .prose > h2:first-child + ul {
    background: #374151;
    border-color: #4b5563;
}

.prose > h2:first-child + ul > li {
    margin-bottom: 0.5rem;
    padding: 0.5rem 0;
    color: #374151;
    font-size: 1rem;
}

.dark .prose > h2:first-child + ul > li {
    color: #d1d5db;
}

/* Спойлеры (div с data-spoiler) */
.prose [data-spoiler="true"] {
    margin-bottom: 1.5rem;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    background: white;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
    overflow: hidden;
}

.dark .prose [data-spoiler="true"] {
    background: #1f2937;
    border-color: #374151;
}

/* Заголовок спойлера */
.prose [data-spoiler-header="true"] {
    padding: 1.25rem 1.5rem;
    cursor: pointer;
    font-weight: 600;
    font-size: 1.125rem;
    color: #9333ea;
    background: linear-gradient(to right, #faf5ff, #eff6ff);
    border-bottom: 1px solid #e5e7eb;
    user-select: none;
    position: relative;
    transition: all 0.2s;
}

.prose [data-spoiler-header="true"]::before {
    content: '▶';
    display: inline-block;
    margin-right: 0.75rem;
    transition: transform 0.2s;
    color: #a855f7;
}

.prose [data-spoiler-open="true"] [data-spoiler-header="true"]::before {
    transform: rotate(90deg);
}

.prose [data-spoiler-header="true"]:hover {
    background: linear-gradient(to right, #f3e8ff, #dbeafe);
    color: #7e22ce;
}

.dark .prose [data-spoiler-header="true"] {
    background: #374151;
    border-color: #4b5563;
    color: #c4b5fd;
}

.dark .prose [data-spoiler-header="true"]:hover {
    background: #4b5563;
    color: #a78bfa;
}

/* Контент спойлера */
.prose [data-spoiler-content="true"] {
    padding: 1.5rem;
    color: #374151;
    line-height: 1.75;
    display: none; /* По умолчанию скрыт */
}

.prose [data-spoiler-open="true"] [data-spoiler-content="true"] {
    display: block; /* Показываем при открытии */
}

.dark .prose [data-spoiler-content="true"] {
    color: #d1d5db;
}

/* Параграфы внутри спойлера */
.prose [data-spoiler-content="true"] > p {
    margin-bottom: 1rem;
}

.prose [data-spoiler-content="true"] > p:last-child {
    margin-bottom: 0;
}

/* Списки внутри спойлера */
.prose [data-spoiler-content="true"] > ul,
.prose [data-spoiler-content="true"] > ol {
    margin-bottom: 1rem;
    padding-left: 2rem;
}

.prose [data-spoiler-content="true"] > ul:last-child,
.prose [data-spoiler-content="true"] > ol:last-child {
    margin-bottom: 0;
}

/* Ссылки внутри спойлера */
.prose [data-spoiler-content="true"] a {
    color: #7c3aed;
    text-decoration: underline;
    font-weight: 500;
}

.prose [data-spoiler-content="true"] a:hover {
    color: #6d28d9;
}

.dark .prose [data-spoiler-content="true"] a {
    color: #a78bfa;
}

.dark .prose [data-spoiler-content="true"] a:hover {
    color: #c4b5fd;
}
