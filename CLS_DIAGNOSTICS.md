# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ CLS (Cumulative Layout Shift)

**–ü—Ä–æ–±–ª–µ–º–∞:** CLS –æ—Å—Ç–∞—ë—Ç—Å—è 0.233 –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

---

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ CSS –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:**
```bash
cd ~/snovidec.ru/public_html
cat public/build/assets/app-*.css | grep -i "min-height" | head -5
```

**–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:**
- `.compact-feed { min-height: 300px; }`
- `.statistics-card { min-height: 150px; }`
- `aside { min-height: 400px; }`

**–ï—Å–ª–∏ –Ω–µ –≤–∏–¥–Ω–æ** ‚Üí –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:
```bash
npm run build
```

---

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π HTML –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:**
```bash
curl -s https://snovidec.ru/ | grep -i "min-height" | head -10
```

**–ò–ª–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
- F12 ‚Üí Elements ‚Üí –Ω–∞–π—Ç–∏ –±–ª–æ–∫–∏ —Å –∫–ª–∞—Å—Å–æ–º `compact-feed`, `statistics-card`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —É –Ω–∏—Ö `style="min-height: ..."` –∏–ª–∏ CSS –∫–ª–∞—Å—Å –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

---

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤—ã–∑—ã–≤–∞—é—Ç CLS

**–í Chrome DevTools:**
1. F12 ‚Üí Performance
2. –ù–∞–∂–∞—Ç—å Record (–∫—Ä—É–∂–æ–∫)
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+R)
4. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å
5. –í —Ä–∞–∑–¥–µ–ª–µ "Experience" –Ω–∞–π—Ç–∏ –∫—Ä–∞—Å–Ω—ã–µ –±–ª–æ–∫–∏ "Layout Shift"
6. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –Ω–∏—Ö ‚Üí —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤—ã–∑—ã–≤–∞—é—Ç shift

**–ò–ª–∏ —á–µ—Ä–µ–∑ Lighthouse:**
1. F12 ‚Üí Lighthouse
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É Performance
3. –í —Ä–∞–∑–¥–µ–ª–µ "Diagnostics" –Ω–∞–π—Ç–∏ "Layout shift culprits"
4. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å ‚Üí —É–≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤

---

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–µ—à

**–û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à:**
- Ctrl+Shift+Delete ‚Üí –æ—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞
- –ò–ª–∏ —Ä–µ–∂–∏–º –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ (Ctrl+Shift+N)
- –ò–ª–∏ Hard Reload (Ctrl+Shift+R)

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–µ—à —Å–µ—Ä–≤–µ—Ä–∞:**
```bash
php8.3 artisan view:clear
php8.3 artisan cache:clear
```

---

## üéØ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã CLS

### 1. –£—Å–ª–æ–≤–Ω—ã–µ –±–ª–æ–∫–∏ (@if)
–ë–ª–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö, –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å shift:
- `@if($reports->count() > 0)` - –ª–µ–Ω—Ç–∞ —Å–Ω–æ–≤–∏–¥–µ–Ω–∏–π
- `@if(isset($latestInterpretations) && $latestInterpretations->count() > 0)` - –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ç–æ–ª–∫–æ–≤–∞–Ω–∏—è
- `@if($userStats && $friendsOnline->count() > 0)` - –¥—Ä—É–∑—å—è –æ–Ω–ª–∞–π–Ω

**–†–µ—à–µ–Ω–∏–µ:** –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞—Ç—å –º–µ—Å—Ç–æ –¥–∞–∂–µ –∫–æ–≥–¥–∞ –±–ª–æ–∫ —Å–∫—Ä—ã—Ç, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `min-height` –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.

### 2. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–µ–∑ —Ä–∞–∑–º–µ—Ä–æ–≤
–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±–µ–∑ `width` –∏ `height`, –≤—ã–∑—ã–≤–∞—é—Ç shift.

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- F12 ‚Üí Elements ‚Üí –Ω–∞–π—Ç–∏ –≤—Å–µ `<img>` —Ç–µ–≥–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —É –Ω–∏—Ö `width` –∏ `height`

### 3. –®—Ä–∏—Ñ—Ç—ã
–ó–∞–≥—Ä—É–∑–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å shift, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `font-display: swap`.

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- F12 ‚Üí Network ‚Üí —Ñ–∏–ª—å—Ç—Ä "Font"
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∏–µ —à—Ä–∏—Ñ—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

### 4. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
–ö–æ–Ω—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript –∏–ª–∏ AJAX, –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å shift.

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- F12 ‚Üí Network ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –≤—Å—Ç–∞–≤–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

---

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 1. –°–∫—Ä–∏–Ω—à–æ—Ç Performance Panel –≤ Chrome
- F12 ‚Üí Performance ‚Üí Record ‚Üí Reload ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –∫—Ä–∞—Å–Ω—ã–µ –±–ª–æ–∫–∏ Layout Shift

### 2. –°–∫—Ä–∏–Ω—à–æ—Ç Lighthouse Diagnostics
- F12 ‚Üí Lighthouse ‚Üí Performance ‚Üí —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å "Layout shift culprits"

### 3. HTML –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Ctrl+U)
- –ò–ª–∏: `curl https://snovidec.ru/ > homepage.html`

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ CSS –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```bash
cat public/build/assets/app-*.css | grep -A 2 "compact-feed\|statistics-card"
```

### 5. –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
- F12 ‚Üí Console ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫–∏

---

## üí° –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. –ë–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞
–î–æ–±–∞–≤–∏—Ç—å `min-height` –Ω–∞ –≤—Å–µ —É—Å–ª–æ–≤–Ω—ã–µ –±–ª–æ–∫–∏, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –æ–Ω–∏ —Å–∫—Ä—ã—Ç—ã.

### 2. Skeleton loaders
–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å placeholder (—Å–∫–µ–ª–µ—Ç–æ–Ω) –≤–º–µ—Å—Ç–æ –ø—É—Å—Ç–æ–≥–æ –º–µ—Å—Ç–∞ –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏.

### 3. Preload –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
Preload —à—Ä–∏—Ñ—Ç–æ–≤ –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö CSS.

### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–º–µ—é—Ç `width` –∏ `height`.

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã Performance Panel –∏–ª–∏ Lighthouse Diagnostics, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –≤—ã–∑—ã–≤–∞—é—â–∏–µ CLS.
