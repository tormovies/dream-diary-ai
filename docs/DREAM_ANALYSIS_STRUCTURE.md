# Структура dream_analysis (JSON ответ от API для единичных снов)

## Общая структура

```json
{
  "dream_analysis": {
    "traditions": [...],
    "analysis_type": "...",
    "dream_title": "...",
    "dream_detailed": "...",
    "dream_type": "...",
    "key_symbols": [...],
    "unified_locations": [...],
    "key_tags": [...],
    "summary_insight": "...",
    "emotional_tone": "...",
    "tradition": "..."
  },
  "recommendations": [
    "Рекомендация 1 на основе анализа",
    "Рекомендация 2",
    "..."
  ]
}
```

## Описание полей

### `traditions` (array[string])
- **Тип**: Массив строк
- **Описание**: Список традиций анализа, использованных при интерпретации
- **Возможные значения**: `freudian`, `jungian`, `cognitive`, `symbolic`, `shamanic`, `gestalt`, `eclectic`
- **Использование в UI**: Отображается как бейджи с переведенными названиями традиций
- **Пример**: `["gestalt", "jungian"]`

### `analysis_type` (string)
- **Тип**: Строка
- **Описание**: Тип проведенного анализа
- **Возможные значения**: `single`, `integrated`, `comparative`
- **Использование в UI**: Отображается как бейдж "Тип анализа: single"
- **Пример**: `"single"`

### `dream_title` (string)
- **Тип**: Строка
- **Описание**: Название сна, предложенное на основе основной темы
- **Использование в UI**: Используется как заголовок H2 в блоке "Анализ сна"
- **Пример**: `"Изобилие и право на место"`

### `dream_detailed` (string)
- **Тип**: Строка (многострочный текст)
- **Описание**: Детальный текстовый анализ сновидения с форматированием
- **Форматирование**: Поддерживает Markdown-подобный синтаксис:
  - Заголовки: `### Заголовок`
  - Жирный текст: `**текст**`
  - Нумерованные списки: `1. Пункт`
- **Использование в UI**: Отображается в блоке "Детальный анализ" с применением форматирования
- **Пример**: `"Сон является мощным продолжением вашей внутренней работы..."`

### `dream_type` (string)
- **Тип**: Строка
- **Описание**: Тип сна по классификации
- **Возможные значения**: `архетипический`, `бытовой`, `осознанный`, `кошмар`, `пророческий`, `повторяющийся`, `исследовательский` и т.д.
- **Использование в UI**: Отображается как бейдж с типом сна
- **Пример**: `"исследовательский"`

### `key_symbols` (array[object])
- **Тип**: Массив объектов
- **Описание**: Ключевые символы из сна с их интерпретацией
- **Структура объекта**:
  ```json
  {
    "symbol": "название символа",
    "meaning": "его значение в контексте истории пользователя"
  }
  ```
- **Использование в UI**: Отображается в блоке "Ключевые символы и их значение" с форматированием
- **Пример**: 
  ```json
  [
    {
      "symbol": "Огород-изобилие",
      "meaning": "Внутренние и, возможно, внешние ресурсы, которые развиваются сверх ожиданий."
    }
  ]
  ```

### `unified_locations` (array[string])
- **Тип**: Массив строк
- **Описание**: Стандартизированные названия локаций из сна
- **Возможные значения**: `Дом`, `Метро`, `Поле боя`, `Офис`, `Школа`, `Лес` и т.д.
- **Использование в UI**: Отображается как бейджи с локациями
- **Пример**: `["Дом", "Сад/Огород"]`

### `key_tags` (array[string])
- **Тип**: Массив строк
- **Описание**: Ключевые теги, характеризующие сон
- **Примеры значений**: `интеграция`, `сила`, `границы`, `творчество`, `изобилие`, `наследие`, `самоценность`, `тень`
- **Использование в UI**: Отображается как бейджи с тегами
- **Пример**: `["изобилие", "наследие", "самоценность", "тень", "интеграция"]`

### `summary_insight` (string)
- **Тип**: Строка
- **Описание**: Одна ключевая мысль или инсайт из сна
- **Использование в UI**: Отображается в выделенном блоке "Ключевая мысль" в карточке анализа
- **Пример**: `"Сон утверждает: вы уже находитесь в пространстве своего изобилия..."`

### `emotional_tone` (string)
- **Тип**: Строка
- **Описание**: Эмоциональный тон сна
- **Возможные значения**: `нейтральный`, `тревожный`, `радостный`, `исследовательский` и т.д.
- **Использование в UI**: Отображается в блоке "Эмоциональный тон" в карточке анализа
- **Пример**: `"исследовательский, впечатлённый, с элементами тревоги и путаницы"`

### `tradition` (array[string] | string)
- **Тип**: Массив строк или строка
- **Описание**: Традиция анализа (может дублировать или дополнять поле `traditions`)
- **Использование в UI**: Отображается как отдельный блок "Традиция:" с бейджами
- **Пример**: `["gestalt"]` или `"gestalt"`

### `recommendations` (array[string])
- **Тип**: Массив строк
- **Описание**: Практические рекомендации на основе анализа сна
- **Использование в UI**: Отображается в блоке "Практические рекомендации" после всех остальных блоков
- **Пример**: `["Рекомендация 1 на основе анализа", "Рекомендация 2"]`

## Использование в коде

### Извлечение данных
```php
$dreamAnalysis = $analysis['dream_analysis'] ?? [];
$keySymbols = $dreamAnalysis['key_symbols'] ?? [];
$unifiedLocations = $dreamAnalysis['unified_locations'] ?? [];
$keyTags = $dreamAnalysis['key_tags'] ?? [];
```

### Отображение в Blade
Все поля отображаются в файле:
`resources/views/dream-analyzer/partials/single-analysis.blade.php`

## Пример полного JSON ответа

```json
{
  "dream_analysis": {
    "traditions": ["gestalt"],
    "analysis_type": "single",
    "dream_title": "Изобилие и право на место",
    "dream_detailed": "Сон является мощным продолжением...",
    "dream_type": "исследовательский",
    "key_symbols": [
      {
        "symbol": "Огород-изобилие",
        "meaning": "Внутренние и, возможно, внешние ресурсы..."
      }
    ],
    "unified_locations": ["Дом", "Сад/Огород"],
    "key_tags": ["изобилие", "наследие", "самоценность", "тень", "интеграция"],
    "summary_insight": "Сон утверждает: вы уже находитесь в пространстве своего изобилия...",
    "emotional_tone": "исследовательский, впечатлённый, с элементами тревоги и путаницы",
    "tradition": ["gestalt"]
  },
  "recommendations": [
    "Рекомендация 1 на основе анализа",
    "Рекомендация 2"
  ]
}
```




















