# Требования к Анализатору Сновидений/Отчетов

**Дата обсуждения:** 2025-01-XX  
**Статус:** Требования собраны, реализация отложена

## Общие цели

1. **Для зарегистрированных пользователей:**
   - Автоматический анализ новых отчетов
   - Настраиваемый функционал
   - Непрерывное отслеживание тенденций и развития снов пользователя

2. **Для незарегистрированных пользователей:**
   - Возможность использования анализатора
   - Ограничения для мотивации к регистрации
   - (Детали ограничений - уточнить позже)

## Технические требования

### 1. Источник анализа
- **API:** ChatGPT или DeepSeek (выбор между ними)
- Использовать API для получения анализа

### 2. Тип анализа
- **Глубокий анализ:** Юнгианский или другой глубокий психологический подход
- **Извлечение данных:**
  - Символы
  - Теги
  - Локации
- **Отслеживание развития:**
  - Развитие снов и тематики из сна в сон
  - Непрерывный анализ одного пользователя
  - Отслеживание тенденций во времени

### 3. Формат вывода
- Текст (развернутый анализ)
- Легкая структуризация (не полностью структурированный, но с элементами структуры)

### 4. Автоматизация
- Автоматический анализ сразу после создания нового неанализированного отчета
- Триггер: появление неанализированного отчета

## Вопросы для уточнения при реализации

1. **Структура данных:**
   - Отдельная таблица `dream_analyses` (one-to-one с `reports`)?
   - Что сохранять: полный текст анализа, извлеченные символы/теги/локации, метаданные?

2. **Для отслеживания тенденций:**
   - Агрегировать историю всех снов пользователя перед анализом нового?
   - Какой объем истории передавать в API (последние N снов/отчетов, все)?

3. **Для незарегистрированных:**
   - Лимиты (количество символов, частота запросов)?
   - Сохранять ли результаты и где/как?

4. **Настройки для зарегистрированных:**
   - Выбор API (ChatGPT/DeepSeek)?
   - Шаблон/стиль анализа?
   - Включение/отключение автоанализа?

## Следующие шаги

- Вернуться к реализации позже
- При возврате к теме - прочитать этот файл и продолжить с реализации




















